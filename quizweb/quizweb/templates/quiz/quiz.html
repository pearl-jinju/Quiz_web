<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, 그리고 Bootstrap 기여자들">
    <meta name="generator" content="Hugo 0.104.2">

    <!--static load-->
    {% load static %}   
    
    <title> HOW MUCH 세상물정 퀴즈</title>

    <link rel="canonical" href="https://getbootstrap.kr/docs/5.2/examples/album/">

  
  <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  <!-- Jquery-->
  <script  src="http://code.jquery.com/jquery-latest.min.js"></script>


    <!--font-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Do+Hyeon&family=Jua&display=swap" rel="stylesheet">
    <link
    href="https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Two+Tone|Material+Icons+Round|Material+Icons+Sharp|Material+Symbols+Outlined"
    rel="stylesheet">

    <!--animateNumber-->
    <script src="https://aishek.github.io/jquery-animateNumber/javascripts/jquery.animateNumber.js"></script>

<style>
  .nav-scroller {
    position: relative;
    z-index: 2;
    height: 2.75rem;
    overflow-y: hidden;
  }

  .nav-scroller .nav {
    display: flex;
    flex-wrap: nowrap;
    padding-bottom: 1rem;
    margin-top: -1px;
    overflow-x: auto;
    text-align: center;
    white-space: nowrap;
    -webkit-overflow-scrolling: touch;
  }

  .modal_overlay {
    width: 100%;
    height: 100%;
    position: absolute;
    left: 0;
    top: 0;
    display: none;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(1.5px);
    -webkit-backdrop-filter: blur(1.5px);
    z-index:999;
  }
  .modal_window {
    background: white;
    backdrop-filter: blur(13.5px);
    -webkit-backdrop-filter: blur(13.5px);
    border-radius: 10px;
    border: 1px solid rgba(255, 255, 255, 0.18);
    position: relative;
    height:500px;
    padding: 10px;
    z-index:999;
  }
  .modal_title{
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    font-weight: bold;
    font-size: 20px;
  }
  .modal_title_side{
    flex: 0 0 40px;
    text-align: center;
  }
  .answer{
    z-index:1000;
    
  }
  .main-frame:hover main-image {
    transform: scale(1.2);
    transition: 0.5s ease-in;
  }

{% comment %} .progress-bar {
  position: relative;
  width: 100%; height:30px;
  margin: 3em auto;
  border: 1px solid green;
}
.bar{
  position:absolute;
  left:0; top:0; bottom:0; width:0;
  background:green;
}

.rate{
  position:absolute;
   top:0; bottom:0; right:15px;
  font-size:1.2em; color:green;
  font-weight:bold;
  line-height:30px;

} {% endcomment %}

</style>
  </head>
  <body id="main" style="">
 
    <header>

      <div class="collapse bg-dark" id="navbarHeader">
        <div class="container">
          <div class="row" >
            <div class="col-sm-9 col-md-7 py-4">
            
            </div>
          </div>
        </div>
      </div>
      <div class="navbar navbar-dark bg-primary shadow-sm">
        <div class="container" style="color:white;">
          <a href="#" class="navbar-brand d-flex flex-row justify-content-center align-items-center">

              <div>
                <a href=".." style="text-decoration: none; color:white;">
                    <div style="font-size:30px; font-family: 'Jua', sans-serif;">HOW MUCH</div>
                </a>
              </div>

                <div >
                  <a >
                      <div ></div>
                  </a>
                </div>
  
            <div style="display:flex; flex-direction:row; justify-content: space-between; align-items:center; margin: 0px 0px 0px 15px;">
              <div style="font-family: 'Jua', sans-serif; font-size:25px;">현재 점수 </div>
              <div style="font-family: 'Jua', sans-serif; margin-left:20px; font-size:25px;" id="now-score">{{now_score}} </div>
            </div>   

            
            
          </a>
    
        </div>
      </div>
    </header>
    <div class="col-12" style="margin-top:10px;">
      <div class="text-center" style="font-family: 'Jua', sans-serif; font-size:20px; font-weight:bold; border-radius:50px; padding:5px 20px; 5px; 20px; margin-left:3px;">
        {{quizset.name}}
      </div>
      <div class="text-center" style="color:gray; font-family: 'Jua', sans-serif; font-size:20px; font-weight:bold; border-radius:50px; padding:5px 20px; 5px; 20px; margin-left:3px;">
        {{quizset.category}}
      </div>
    </div>

    
    <div class="container">
      <div class="row">
        <div class="main-frame col-12 text-center my-0 p-0 mb-0 bg-success  text-white bg-opacity-75" style="text-align: center; background: linear-gradient(white, white, white);">
          <img class="img-fluid border-5 main-image"  width="50%" height="50%" style="min-height: 250px; min-width: 250px;  max-height: 251x; max-width: 251px;" src="{{quizset.img_url}}" alt="Your Image" />
        </div>
      </div>
      
      <div  class="row col-12 d-flex justify-content-center">
      <div class="row col-12 " style="background: linear-gradient(skyBlue, skyBlue, skyBlue); border-radius:16px; padding:5px 20px; 5px; 20px; margin-left:15px;">
          <div class="col-12">
            <form>
                <div class="row ">
                  <div class="form-group col-12 " style="margin-top:15px;">
                    <input id="price" type="text" class="price form-control" style="text-align:center; font-family: 'Jua', sans-serif; font-size:20px;" value=0 placeholder="단위: 원" />
                  </div>
                </div>  

                <div class ="col-12 d-flex justify-content-center text-center" style="margin-top:5px;">
                  <button type="button" id="clear"  class="clear btn btn-danger" style="font-family: 'Jua', sans-serif; font-size:20px; margin:5px 2px; padding:0px 15px; 0px 15px; border-radius:15px;">CLEAR</button>
                  <div>
                    <button type="button" id="plus100" plus_value=100 class="plus btn btn-primary" style="font-family: 'Jua', sans-serif; font-size:18px; margin:5px 2px; padding:5px 30px; 5px 30px;">+100</button>
                    <button type="button" id="plus500" plus_value=500 class="plus btn btn-primary" style="font-family: 'Jua', sans-serif; font-size:18px; margin:5px 2px; padding:5px 30px; 5px 30px;">+500</button>
                    <button type="button" id="plus1000" plus_value=1000 class="plus btn btn-primary" style="font-family: 'Jua', sans-serif; font-size:18px; margin:5px 2px; padding:5px 22px 5px 22px;">+1,000</button>

                    <button type="button" id="plus5000" plus_value=5000 class="plus btn btn-primary" style="font-family: 'Jua', sans-serif; font-size:18px; margin:5px 2px; padding:5px 22px 5px 22px;">+5,000</button>
                    <button type="button" id="plus10000" plus_value=10000 class="plus btn btn-primary" style="font-family: 'Jua', sans-serif; font-size:18px; margin:5px 2px; padding:5px 15px 5px 15px;">+10,000</button>
                    <button type="button" id="plus50000" plus_value=50000 class="plus btn btn-primary" style="font-family: 'Jua', sans-serif; font-size:18px; margin:5px 2px; padding:5px 15px 5px 15px;">+50,000</button>
                  </div>          
                </div>
                <button type="button" id="submit"  class="clear btn btn-success" style="font-family: 'Jua', sans-serif;font-size:25px; width:100%; margin:5px 2px; padding:5px 15px 5px 15px;">제 출</button>
            </form>
          </div>

        </div>
      </div>

{% comment %} <div class="progress-bar">
  <div class="bar"></div>
  <div class="rate" data-rate="100">10%</div>
</div> {% endcomment %}
{% comment %} 
<div class="container" style="margin-top:15px;">
  <div class="row col-12 d-flex justify-content-center">
    <div>
      <ins class="kakao_ad_area" style="display:none;"
      data-ad-unit = "DAN-gYELycGSNHR66ZqC"
      data-ad-width = "320"
      data-ad-height = "100"></ins>
      <script type="text/javascript" src="//t1.daumcdn.net/kas/static/ba.min.js" async></script>
    </div>
    <div>
      <ins class="kakao_ad_area" style="display:none;"
      data-ad-unit = "DAN-Tb9M6bXzcQiGt1YP"
      data-ad-width = "320"
      data-ad-height = "50"></ins>
      <script type="text/javascript" src="//t1.daumcdn.net/kas/static/ba.min.js" async></script>
    </div>
    <div>
      <ins class="kakao_ad_area" style="display:none;"
      data-ad-unit = "DAN-Tb9M6bXzcQiGt1YP"
      data-ad-width = "320"
      data-ad-height = "50"></ins>
      <script type="text/javascript" src="//t1.daumcdn.net/kas/static/ba.min.js" async></script>
    </div>

  </div>
  </div> {% endcomment %}

  
<!--modal-->
<div id="first_modal" class="modal_overlay" >
  <div class="modal_window col-12">
      <div
          style="border-bottom:solid 2px gray; text-align:center;">
          <div >
            <b></b>
            </div>
          <div >
          <b>정답 확인</b>
          </div>
          <div >
            <b></b>
            </div>



      </div>
      
<div class="img_upload_space position-relative d-flex flex-column justify-content-center text-center" style="opacity:75%; background-color:white; background-size: 65%; background-repeat: no-repeat; background-position: center; margin-top:10px;" ></div>
<img class='rounded mx-auto d-block' width="50%" height="50%" style=" min-height: 250px; min-width: 250px;  max-height: 251x; max-width: 251px;"src="{{quizset.img_url}}">
 
</img>
<div class="d-flex flex:row justify-content-center" style="margin-top:25px;">
  <div class="text-center answer-input" style="font-family: 'Jua', sans-serif; font-size:25px; ">
    입력한 값 
  </div>
  <div class="text-center answer-input" id="answer-input" style="font-family: 'Jua', sans-serif; font-size:25px; margin-left:20px;">
    원 
  </div>
</div>
<div class="d-flex flex:row justify-content-center">
  <div class="text-center answer-answer" style="font-family: 'Jua', sans-serif; font-size:25px; ">
    정답
  </div>
  <div class="text-center answer-input" id="answer-answer" style="font-family: 'Jua', sans-serif;  font-size:25px; margin-left:20px;">
    원 
  </div>
</div>
<div class="d-flex flex:row justify-content-center">
  <div class="text-center answer-score" style="font-family: 'Jua', sans-serif; font-size:30px;  ">
    점수
  </div>
  <div class="text-center answer-input" id="answer-score" style="font-family: 'Jua', sans-serif;  font-size:25px; margin-left:20px;">
    
  </div>
</div>

<button id="button_next" onclick="nextQuiz()" type="button" class="label btn btn-primary" style="font-size:20px; font-weight:bold; width:30%; height:10%; position: relative; left: 35%; bottom:0%; ">
다음문제
</button>

</div>
      



    <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha2/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js" integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V" crossorigin="anonymous"></script> 
  </body>
</html>

<script>
var nowScore = $('#now-score').text()
if(nowScore==" "){
  console.log("아")
  $('#now-score').text(0)
}

$(".plus").click(function (event){
    var plusValue = event.target.attributes.getNamedItem("plus_value").value;
    var resultValue = parseInt($('#price').val()) +  parseInt(plusValue)  
    var currentValue = $('#price').attr("value")
    $('#price').attr("value",resultValue)
    if ($('#price').attr("value")>=1500000){
      alert("150만원 미만으로 입력가능합니다!")
      $('#price').attr("value",resultValue - plusValue)
    }

});



{% comment %} $(".plus").dblclick(function (event){
  console.log("확인")
  var plusValue = event.target.attributes.getNamedItem("plus_value").value;
  var resultValue = parseInt($('#price').val()) -  parseInt(plusValue)*2  
  var currentValue = $('#price').attr("value")
  $('#price').attr("value",resultValue)
  if ($('#price').attr("value")>=1000000){
    alert("100만원 미만으로 입력가능합니다!")
    $('#price').attr("value",resultValue - plusValue)
  }else if  ($('#price').attr("value")<0){
      $('#price').attr("value",0)

    alert("0원이하는 입력할 수 없습니다!")
  }

}); {% endcomment %}

$("#clear").click(function (event){
  $('#price').attr("value",0)
});


$("#submit").click(function (event){
  if ($('#price').attr("value")>=1500000){
    var plusValue = event.target.attributes.getNamedItem("plus_value").value;
    var resultValue = parseInt($('#price').val()) +  parseInt(plusValue)  
    alert("150만원 미만으로 입력가능합니다!")
    $('#price').attr("value",resultValue - plusValue)

  }
});

// + 버튼 modal 띄우기
$("#submit").click(function (event){
  const modal = document.getElementById("first_modal");
  modal.style.top = window.pageYOffset + 'px'; // top을 이용해 시작 y위치를 바꿔줌 
  modal.style.display = "flex";
  document.body.style.overflowY = "hidden"; // 스크롤 없애기
  var price = $('#price').attr("value")


  url = "check?"+"price="+price

  $.ajax({
    url:url,
    data: {},
    method: "GET",
    success: function (response) {
      console.log(response.price)
      console.log(response.answer_price)
       $('#answer-input').text(response.price)
       $('#answer-answer').text(response.answer_price)
       $('#answer-score').text(response.score)

       
    },
    error: function (response) {

    },
    complete: function () {


    }
})
  

});

function nextQuiz(){
  const modal = document.getElementById("first_modal");

  var nowScore = parseInt($('#now-score').text())
  var newScore = parseInt($('#answer-score').text())+nowScore
  console.log(newScore)

  modal.style.display = "none";
  document.body.style.overflowY = "visible";

  var url = "score?"+"now_score="+newScore


  $.ajax({
    url:url,
    data: {},
    method: "GET",
    success: function (response) {
      console.log("성공?")
      location.reload(); // 새로고침으로 session을 가져옴
       
    },
    error: function (response) {

    },
    complete: function () {


    }
})
  

};
 

{% comment %} function loadingBar(){  
  var progressWrap = $('.progress-bar')
  var progressBar = progressWrap.find('.bar')
  var progressText = progressWrap.find('.rate')
  var progressRate = progressText.attr('data-rate')
    console.log(progressRate)

  //bar animation 
  progressBar.animate({width:progressRate +"%"},2500);
  progressText.text('0%');

  var timer = setInterval(textAnimation,1000/10);
  function textAnimation(){
  var currentRate = progressBar.width()/ progressWrap.width()*100;
  progressText.text(Math.ceil(currentRate)+'%')

  if(currentRate==progressRate){
    clearInterval(timer)
  }

  }
} {% endcomment %}





</script>